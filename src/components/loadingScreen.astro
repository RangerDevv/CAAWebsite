---
import logo from '../assets/CAALogoTransparent.png';
---

<div id="loading-screen" class="loading-screen">
  <!-- Animated background grid -->
  <div class="grid-bg"></div>
  
  <!-- Floating particles -->
  <div class="particles">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
  </div>

  <!-- Main content -->
  <div class="loading-content">
    <div class="logo-container">
      <div class="logo-ring"></div>
      <img src={logo.src} alt="CAA Logo" class="loading-logo" />
    </div>
    
    <h1 class="loading-title">Central Asian American</h1>
    <div class="loading-subtitle">Community</div>
    
    <div class="progress-container">
      <div class="progress-bar">
        <div class="progress-fill"></div>
        <div class="progress-glow"></div>
      </div>
      <div class="progress-text">
        <span class="loading-status">INITIALIZING</span>
        <span class="loading-percent">0%</span>
      </div>
    </div>

    <div class="loading-tips">
      <p class="tip">ðŸ’¡ <span id="tip-text">Join thousands of Central Asians connecting worldwide</span></p>
    </div>
  </div>

  <!-- Corner accents -->
  <div class="corner corner-tl"></div>
  <div class="corner corner-tr"></div>
  <div class="corner corner-bl"></div>
  <div class="corner corner-br"></div>
</div>

<script>
  // Animated loading progress
  const loadingScreen = document.getElementById('loading-screen');
  const progressFill = document.querySelector('.progress-fill') as HTMLElement;
  const progressPercent = document.querySelector('.loading-percent') as HTMLElement;
  const loadingStatus = document.querySelector('.loading-status') as HTMLElement;
  const tipText = document.getElementById('tip-text') as HTMLElement;

  const tips = [
    "Join thousands of Central Asians connecting worldwide",
    "Share your heritage, learn new traditions",
    "Events, meetups, and cultural celebrations",
    "Connect with others who share your background"
  ];

  let progress = 0;
  let tipIndex = 0;

  const interval = setInterval(() => {
    progress += Math.random() * 15 + 5;
    if (progress >= 100) {
      progress = 100;
      clearInterval(interval);
      
      if (loadingStatus) loadingStatus.textContent = 'COMPLETE';
      
      setTimeout(() => {
        if (loadingScreen) {
          loadingScreen.classList.add('hidden');
          setTimeout(() => {
            loadingScreen.remove();
          }, 600);
        }
      }, 400);
    }

    if (progressFill) progressFill.style.width = progress + '%';
    if (progressPercent) progressPercent.textContent = Math.floor(progress) + '%';

    // Change tips occasionally
    if (progress > 30 && tipIndex === 0) {
      tipIndex = 1;
      if (tipText) tipText.textContent = tips[1];
    } else if (progress > 60 && tipIndex === 1) {
      tipIndex = 2;
      if (tipText) tipText.textContent = tips[2];
    }
  }, 150);
</script>

<style>
  .loading-screen {
    position: fixed;
    inset: 0;
    background: radial-gradient(ellipse at center, #1a1f2e 0%, #0f1115 100%);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 1;
    transition: opacity 600ms cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
  }

  .loading-screen.hidden {
    opacity: 0;
  }

  /* Animated grid background */
  .grid-bg {
    position: absolute;
    inset: 0;
    background-image: 
      linear-gradient(rgba(88, 101, 242, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(88, 101, 242, 0.03) 1px, transparent 1px);
    background-size: 50px 50px;
    animation: grid-move 20s linear infinite;
    z-index: 1;
  }

  @keyframes grid-move {
    0% { transform: translate(0, 0); }
    100% { transform: translate(50px, 50px); }
  }

  /* Floating particles */
  .particles {
    position: absolute;
    inset: 0;
    overflow: hidden;
    z-index: 2;
  }

  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: var(--caa-accent);
    border-radius: 50%;
    opacity: 0;
    animation: float 6s infinite ease-in-out;
  }

  .particle:nth-child(1) { left: 20%; animation-delay: 0s; }
  .particle:nth-child(2) { left: 40%; animation-delay: 1.2s; }
  .particle:nth-child(3) { left: 60%; animation-delay: 2.4s; }
  .particle:nth-child(4) { left: 80%; animation-delay: 3.6s; }
  .particle:nth-child(5) { left: 50%; animation-delay: 4.8s; }

  @keyframes float {
    0%, 100% { transform: translateY(100vh); opacity: 0; }
    10% { opacity: 1; }
    90% { opacity: 1; }
    100% { transform: translateY(-100px); opacity: 0; }
  }

  /* Main content */
  .loading-content {
    position: relative;
    z-index: 3;
    text-align: center;
    max-width: 500px;
    padding: 2rem;
  }

  .logo-container {
    position: relative;
    width: 140px;
    height: 140px;
    margin: 0 auto 2rem;
  }

  .logo-ring {
    position: absolute;
    inset: -10px;
    border: 2px solid var(--caa-accent);
    border-radius: 50%;
    opacity: 0.3;
    animation: ring-pulse 2s infinite ease-in-out;
  }

  @keyframes ring-pulse {
    0%, 100% { transform: scale(1); opacity: 0.3; }
    50% { transform: scale(1.1); opacity: 0.6; }
  }

  .loading-logo {
    width: 140px;
    height: 140px;
    object-fit: contain;
    animation: logo-float 3s infinite ease-in-out;
    filter: drop-shadow(0 0 20px rgba(88, 101, 242, 0.4));
  }

  @keyframes logo-float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }

  .loading-title {
    font-size: 1.8rem;
    font-weight: 700;
    background: linear-gradient(135deg, #e5e7eb 0%, #a5b4fc 50%, #818cf8 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.5rem;
    letter-spacing: 0.05em;
    animation: title-glow 3s infinite ease-in-out;
  }

  .loading-subtitle {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--caa-muted);
    margin-bottom: 3rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
  }

  /* Progress bar */
  .progress-container {
    margin-bottom: 2rem;
  }

  .progress-bar {
    position: relative;
    width: 100%;
    height: 6px;
    background: var(--caa-surface);
    border-radius: 3px;
    overflow: hidden;
    margin-bottom: 0.75rem;
    border: 1px solid var(--caa-border);
  }

  .progress-fill {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--caa-accent), var(--caa-accent-hover), #818cf8);
    border-radius: 3px;
    transition: width 150ms ease-out;
  }

  .progress-glow {
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: shimmer 2s infinite;
  }

  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  .progress-text {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  .loading-status {
    color: var(--caa-accent);
  }

  .loading-percent {
    color: var(--caa-muted);
    font-family: 'Courier New', monospace;
  }

  /* Tips */
  .loading-tips {
    margin-top: 2rem;
  }

  .tip {
    color: var(--caa-muted);
    font-size: 0.9rem;
    font-style: italic;
    animation: tip-fade 1s ease-in-out;
  }

  @keyframes tip-fade {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Corner accents */
  .corner {
    position: absolute;
    width: 60px;
    height: 60px;
    border: 2px solid var(--caa-accent);
    opacity: 0.3;
    z-index: 2;
    animation: corner-pulse 4s infinite ease-in-out;
  }

  .corner-tl {
    top: 20px;
    left: 20px;
    border-right: none;
    border-bottom: none;
  }

  .corner-tr {
    top: 20px;
    right: 20px;
    border-left: none;
    border-bottom: none;
    animation-delay: 1s;
  }

  .corner-bl {
    bottom: 20px;
    left: 20px;
    border-right: none;
    border-top: none;
    animation-delay: 2s;
  }

  .corner-br {
    bottom: 20px;
    right: 20px;
    border-left: none;
    border-top: none;
    animation-delay: 3s;
  }

  @keyframes corner-pulse {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(1.05); }
  }

  @media (max-width: 640px) {
    .loading-title { font-size: 1.4rem; }
    .loading-subtitle { font-size: 1rem; }
    .logo-container { width: 100px; height: 100px; }
    .loading-logo { width: 100px; height: 100px; }
    .corner { width: 40px; height: 40px; }
  }
</style>
